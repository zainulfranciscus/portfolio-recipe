<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<div xmlns:jsp="http://java.sun.com/JSP/Page"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:spring="http://www.springframework.org/tags"
	xmlns:form="http://www.springframework.org/tags/form"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions" version="2.0">


	<jsp:directive.page contentType="text/html;charset=UTF-8" />
	<jsp:output omit-xml-declaration="yes" />
	<div id="page" class="center">
		<div class="recipe-details">

			<div class="column1">
				<div class="info-card-wrapper">
					<div class="info-card">
						<h1 class="title">${recipe.name}</h1>
						<a class="source" href="${recipe.authorLink}">${recipe.author}</a>

						<div class="portrait-frame lg">
							<div class="portrait">
								<a href="${recipe.authorLink}"> <img
									src="images/${recipe.picture}" />
								</a>
							</div>
						</div>

						<div class="ingredients-list">
							<div id="source-ingredients" class="">
								<ul id="ingredients-toggle" class="toggle-menu">
									<li class="title">Ingredients</li>
								</ul>

								<ul>
									<c:forEach items="${recipe.ingredients}" var="ingredient">
										<li><span>${ingredient.ingredientType.name}
												${ingredient.amount} ${ingredient.metric}</span></li>
									</c:forEach>
								</ul>
							</div>
						</div>

						<div id="preparation">
							<span class="title">Preparation</span> <a class="source"
								href="${recipe.authorLink}">Read Recipe Preparation on <strong>${recipe.author}</strong></a>
						</div>

					</div>

				</div>
			</div>

			<div class="column2">
				<div id="who-likes">
					<p id="who-likes-count" class="gutter">${fn:length(recipe.account)}
						people saved this recipe.</p>
				</div>

				<c:forEach items="${recipe.account}" var="account">
					<div class="tiny-user-card">
						<a title="${account.userName}" href="/${account.userName}"> <img
							class="avatart" alt="${account.userName}"
							src="images/mystery_avatart2.jpg" />
						</a>
					</div>


				</c:forEach>

			</div>
		</div>
	</div>
	<table>







		<tr>


			<c:set var="username" value='${sessionScope.RecipeUser.username}' />
			<c:set var="isLikedByUser" value='${recipe.isLikedByUser(username)}' />

			<c:if test="${isLikedByUser}">
				<td><a href="#" title="${recipe.id}" name="unlike">Unlike</a></td>
			</c:if>

			<c:if test="${not isLikedByUser}">
				<td><a href="#" title="${recipe.id}" name="like">Like</a></td>
			</c:if>

		</tr>
	</table>


</div>
